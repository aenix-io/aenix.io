{"id":708,"date":"2023-12-20T07:21:00","date_gmt":"2023-12-20T07:21:00","guid":{"rendered":"https:\/\/aenix.io\/?p=708"},"modified":"2023-12-24T23:58:22","modified_gmt":"2023-12-24T23:58:22","slug":"prototype-a-virtualization-subsystem-for-deckhouse-kubernetes-platform","status":"publish","type":"post","link":"https:\/\/aenix.io\/prototype-a-virtualization-subsystem-for-deckhouse-kubernetes-platform\/","title":{"rendered":"Prototype a virtualization subsystem for Deckhouse Kubernetes platform"},"content":{"rendered":"\n<p>Development of a Kubernetes-native cloud virtualization system, tailored to integrate with the Deckhouse Kubernetes platform, enabling compatibility with its existing modules.<\/p>\n\n\n\n<p><strong>Objective:<\/strong><\/p>\n\n\n\n<p>The goal was to implement cloud system functionality on the Deckhouse Kubernetes platform, ensuring maximum compatibility and management through Kubernetes objects.<\/p>\n\n\n\n<p><strong>Researched:<\/strong><\/p>\n\n\n\n<p>Several open-source cloud platforms, including OpenStack, OpenNebula, CloudStack, Ganeti, and KubeVirt, were evaluated. After thorough comparison, KubeVirt was chosen as the most suitable solution.<\/p>\n\n\n\n<p><strong>Implementation:<\/strong><\/p>\n\n\n\n<ul>\n<li><strong>Network Improvements:<\/strong> The initial network implementation in KubeVirt was not satisfactory, prompting significant enhancements to achieve maximum performance and stability. The realization of the new macvtap method led to a 20% reduction in network latency for standard CNI binding method.<\/li>\n\n\n\n<li><strong>IPAM:<\/strong> A specialized IP Address Management service was developed to allocate static IP addresses for virtual machines, allowing them to operate alongside the ephemeral pods in Kubernetes.<\/li>\n\n\n\n<li><strong>Distributed Router:<\/strong> A distributed router was implemented to monitor the location of virtual machines within the cluster and dynamically adjust routes accordingly.<\/li>\n\n\n\n<li><strong>Cilium modifications:<\/strong> Cilium updated with custom patches to add functionality for preserving IP and MAC addresses during the live migration of virtual machines to different nodes.<\/li>\n<\/ul>\n\n\n\n<p><strong>Outcomes:<\/strong><\/p>\n\n\n\n<p>After the release of the alpha version, the development transferred to a dedicated virtualization team. This included the complete transfer of expertise and assistance in designing the API for the next version.<\/p>\n\n\n\n<p><strong>Additional Links:<\/strong><\/p>\n\n\n<div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/blog.deckhouse.io\/deckhouse-v1-43-introduces-the-next-generation-virtualization-system-347bd758021a\" class=\"vlp-link\" title=\"Deckhouse v1.43 introduces the next-generation virtualization system\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/miro.medium.com\/v2\/resize:fit:1200\/0*1A2KX0mHjTsez1er.png\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">Deckhouse v1.43 introduces the next-generation virtualization system<\/div><div class=\"vlp-block-1 vlp-link-summary\">Over the past few years, we at Flant have been keeping a close eye on the technology leaders in the cloud-native space. But it\u2019s more than\u2026<\/div><\/div><\/div>\n\n<div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/github.com\/kubevirt\/kubevirt\/pull\/7648\" class=\"vlp-link\" title=\"Macvtap binding mode for pod network #7648\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/opengraph.githubassets.com\/2bb7fc22042fbc296e8862cf210e18bd69a29989f2030ae93c003cdff13e2eae\/kubevirt\/kubevirt\/pull\/7648\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">Macvtap binding mode for pod network #7648<\/div><div class=\"vlp-block-1 vlp-link-summary\">This PR adds macvtap networking mode for binding podNetwork.<br \/>\nThis method does not requires any bridges, as a result we have less latency to communicate with other pods and VMs.<\/div><\/div><\/div>\n\n<div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/github.com\/kubevirt\/kubevirt\/pull\/7768\" class=\"vlp-link\" title=\"Allow live-migration for pod network in bridge mode #7768\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/opengraph.githubassets.com\/f14345f16d0f9cba22d879ac5d3f1e22c517769930d76d315802ca15c0ce8ad3\/kubevirt\/kubevirt\/pull\/7768\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">Allow live-migration for pod network in bridge mode #7768<\/div><div class=\"vlp-block-1 vlp-link-summary\">This PR enables the live-migration feaure for pod networking in any mode.<\/div><\/div><\/div>\n\n\n<p><strong>Presentation:<\/strong><\/p>\n\n\n\n<figure class=\"wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio\"><div class=\"wp-block-embed__wrapper\">\n<div class=\"nv-iframe-embed\"><iframe loading=\"lazy\" title=\"KubeVirt, its networking, and how we brought it to the next level \/  Andrei Kvapil (Palark)\" width=\"1200\" height=\"675\" src=\"https:\/\/www.youtube.com\/embed\/jp2XY-9MORM?feature=oembed\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen><\/iframe><\/div>\n<\/div><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>Development of a Kubernetes-native cloud virtualization system, tailored to integrate with the Deckhouse Kubernetes platform, enabling compatibility with its existing modules.<\/p>\n","protected":false},"author":1,"featured_media":946,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"neve_meta_sidebar":"","neve_meta_container":"","neve_meta_enable_content_width":"","neve_meta_content_width":0,"neve_meta_title_alignment":"","neve_meta_author_avatar":"","neve_post_elements_order":"","neve_meta_disable_header":"","neve_meta_disable_footer":"","neve_meta_disable_title":"","_ti_tpc_template_sync":false,"_ti_tpc_template_id":"","footnotes":""},"categories":[7,1],"tags":[],"_links":{"self":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/708"}],"collection":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/comments?post=708"}],"version-history":[{"count":35,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/708\/revisions"}],"predecessor-version":[{"id":1201,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/708\/revisions\/1201"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/media\/946"}],"wp:attachment":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/media?parent=708"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/categories?post=708"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/tags?post=708"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}