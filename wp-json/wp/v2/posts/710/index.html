{"id":710,"date":"2023-12-20T07:21:49","date_gmt":"2023-12-20T07:21:49","guid":{"rendered":"https:\/\/aenix.io\/?p=710"},"modified":"2023-12-24T23:57:53","modified_gmt":"2023-12-24T23:57:53","slug":"design-a-full-feature-csi-driver-for-shared-san-in-kubernetes","status":"publish","type":"post","link":"https:\/\/aenix.io\/design-a-full-feature-csi-driver-for-shared-san-in-kubernetes\/","title":{"rendered":"Design a full feature CSI driver for shared SAN in Kubernetes"},"content":{"rendered":"<p>A complex research of the new storage subsystem in the Linux kernel and QEMU Storage Daemon and developing the design for an innovative CSI driver for shared LUNs in Kubernetes. <\/p><p><strong>Objective:<\/strong><\/p><p>This research aimed to develop an innovative design for a Container Storage Interface (CSI) driver suitable for shared LUNs in Kubernetes, focusing on efficient snapshot creation and support for ReadWriteMany mode for live migration of virtual machines in KubeVirt.<\/p><p><strong>Researched:<\/strong><\/p><ul class=\"wp-block-list\"><li><strong>Linux Kernel Subsystems:<\/strong> The study delved into advanced Linux kernel storage technologies, including ublk (Userspace Block Device Driver), VDPA (Virtual Data Path Acceleration), and vDUSE (Virtual Device User Space).<\/li>\n\n<li><strong>QEMU Storage Daemon:<\/strong> Investigated the specialized daemon responsible for data storage, along with its API.<\/li>\n\n<li><strong>Fencing Methods:<\/strong> Explored various techniques for handling faulty nodes.<\/li>\n\n<li><strong>Performance Analysis:<\/strong> Assessed the performance of different snapshot technologies, such as LVM, LVM Thin, QCOW2, and various device export technologies, including ublk, nbd, vhost, and vdpa.<\/li><\/ul><p><strong>Outcomes:<\/strong><\/p><ul class=\"wp-block-list\"><li><strong>Design Documentation:<\/strong> Produced a comprehensive design of all components for the Kubernetes CSI driver, complete with detailed documentation that outlines the interaction of all components. This encompassed the design of the driver&#8217;s components in Kubernetes, their low-level API interactions, and a high-level user interface for configuring the storage subsystem.<\/li>\n\n<li><strong>Community Engagement:<\/strong> The findings were presented to and discussed with the wider community, as well as with the core developers of QEMU.<\/li><\/ul><p><strong>Additional links:<\/strong><\/p><div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/habrastorage.org\/webt\/cp\/cl\/iz\/cpclizqkb737ev5f_1nglxhrn7q.gif\" class=\"vlp-link\" title=\"Kubernetes CSI driver components\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/habrastorage.org\/webt\/cp\/cl\/iz\/cpclizqkb737ev5f_1nglxhrn7q.gif\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">Kubernetes CSI driver components<\/div><div class=\"vlp-block-1 vlp-link-summary\">Graphical representation of dynamic PVC provisioning in Kubernetes <\/div><\/div><\/div><div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/itnext.io\/the-evolution-of-network-virtualization-technologies-in-linux-6ba3a4e9f293\" class=\"vlp-link\" title=\"The Evolution of Network Virtualization Technologies in Linux\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/miro.medium.com\/v2\/resize:fit:1080\/0*Q2RZPvSUqJjgjOZx.png\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">The Evolution of Network Virtualization Technologies in Linux<\/div><div class=\"vlp-block-1 vlp-link-summary\">How and why device virtualization technologies developed, how they work, their strengths and weaknesses.<\/div><\/div><\/div><div class=\"vlp-link-container vlp-layout-quick wp-block-visual-link-preview-link\"><a href=\"https:\/\/blog.deckhouse.io\/lvm-qcow-csi-driver-shared-san-kubernetes-81455201590e\" class=\"vlp-link\" title=\"LVM+QCOW2: creating a perfect CSI driver for shared SAN in Kubernetes\" rel=\"nofollow\" target=\"_blank\"><\/a><div class=\"vlp-layout-zone-side\"><div class=\"vlp-block-2 vlp-link-image\"><img decoding=\"async\" src=\"https:\/\/miro.medium.com\/v2\/resize:fit:1200\/1*19x5GB1vrtTD02ScSUBYSg.png\" style=\"max-width: 150px; max-height: 150px\" \/><\/div><\/div><div class=\"vlp-layout-zone-main\"><div class=\"vlp-block-0 vlp-link-title\">LVM+QCOW2: creating a perfect CSI driver for shared SAN in Kubernetes<\/div><div class=\"vlp-block-1 vlp-link-summary\">Building a fast and universal driver with clustered LVM and the QCOW2 for using any SAN-like storage system in K8s.<\/div><\/div><\/div>","protected":false},"excerpt":{"rendered":"<p>A complex research of the new storage subsystem in the Linux kernel and QEMU Storage Daemon and developing the design for an innovative CSI driver for shared LUNs in Kubernetes. <\/p>\n","protected":false},"author":1,"featured_media":949,"comment_status":"closed","ping_status":"closed","sticky":false,"template":"","format":"standard","meta":{"postBodyMargin":[],"postBodyPadding":[],"postBodyBackground":{"backgroundType":"classic","gradient":""},"neve_meta_sidebar":"","neve_meta_container":"","neve_meta_enable_content_width":"","neve_meta_content_width":0,"neve_meta_title_alignment":"","neve_meta_author_avatar":"","neve_post_elements_order":"","neve_meta_disable_header":"","neve_meta_disable_footer":"","neve_meta_disable_title":"","_ti_tpc_template_sync":false,"_ti_tpc_template_id":"","footnotes":""},"categories":[7,1],"tags":[],"class_list":["post-710","post","type-post","status-publish","format-standard","has-post-thumbnail","hentry","category-case-studies","category-featured"],"_links":{"self":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/710"}],"collection":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/comments?post=710"}],"version-history":[{"count":36,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/710\/revisions"}],"predecessor-version":[{"id":1110,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/posts\/710\/revisions\/1110"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/media\/949"}],"wp:attachment":[{"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/media?parent=710"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/categories?post=710"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/aenix.io\/wp-json\/wp\/v2\/tags?post=710"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}